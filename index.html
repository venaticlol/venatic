<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recon-Cord</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Login Screen -->
    <div id="login-screen" class="login-container">
        <div class="login-box">
            <div class="login-header">
                <h1><i class="fas fa-satellite-dish"></i> Recon-Cord</h1>
                <p>Your place to talk</p>
            </div>
            <div style="text-align: center; margin-bottom: 20px;">
                <a href="setup-firebase.html" style="color: #5865f2; text-decoration: none; font-size: 14px; font-weight: 600;">
                    üîß Need help setting up Firebase?
                </a>
                <br>
                <a href="https://console.firebase.google.com/project/recon-cord/authentication/providers" target="_blank" style="color: #5865f2; text-decoration: none; font-size: 12px; margin-top: 5px; display: inline-block;">
                    ‚Üí Direct link to enable Anonymous Auth
                </a>
                <br>
                <a href="TROUBLESHOOTING.md" target="_blank" style="color: #72767d; text-decoration: none; font-size: 11px; margin-top: 5px; display: inline-block;">
                    Having connection issues? (Ad blockers, etc.)
                </a>
                <br>
                <a href="FIRESTORE_API_SETUP.md" target="_blank" style="color: #ff6b6b; text-decoration: none; font-size: 11px; margin-top: 5px; display: inline-block; font-weight: 600;">
                    ‚ö†Ô∏è Firestore API not enabled? Click here
                </a>
            </div>
            <div class="login-form">
                <div class="form-tabs">
                    <button class="tab-btn active" data-tab="login">Login</button>
                    <button class="tab-btn" data-tab="register">Register</button>
                </div>
                <div id="login-form" class="form-content active">
                    <input type="text" id="login-username" placeholder="Username" required>
                    <input type="password" id="login-password" placeholder="Password" required>
                    <button id="login-btn" class="btn-primary">Login</button>
                    <p id="login-error" class="error-message"></p>
                </div>
                <div id="register-form" class="form-content">
                    <input type="text" id="register-username" placeholder="Username" required>
                    <input type="text" id="register-display-name" placeholder="Display Name" required>
                    <input type="date" id="register-dob" placeholder="Date of Birth" required>
                    <input type="password" id="register-password" placeholder="Password" required>
                    <small style="color: #72767d; display: block; margin-bottom: 10px; font-size: 12px;">You must be at least 14 years old to register.</small>
                    <button id="register-btn" class="btn-primary">Register</button>
                    <p id="register-error" class="error-message"></p>
                </div>
            </div>
        </div>
    </div>

    <!-- Main App -->
    <div id="app" class="app-container hidden">
        <!-- Server Sidebar -->
        <div class="server-sidebar">
            <div class="server-item active" data-server-id="home">
                <i class="fas fa-home"></i>
            </div>
            <div class="server-divider"></div>
            <div id="server-list" class="server-list">
                <!-- Servers will be dynamically added here -->
            </div>
            <button id="add-server-btn" class="server-item add-server" title="Add Server">
                <i class="fas fa-plus"></i>
            </button>
        </div>

        <!-- Channel Sidebar -->
        <div class="channel-sidebar">
            <div id="channel-header" class="channel-header">
                <h2 id="server-name">Home</h2>
                <button id="server-settings-btn" class="icon-btn" title="Server Settings">
                    <i class="fas fa-cog"></i>
                </button>
            </div>
            
            <div id="channel-list-container">
                <div id="direct-messages" class="channel-section">
                    <div class="channel-section-header">
                        <i class="fas fa-envelope"></i>
                        <span>DIRECT MESSAGES</span>
                        <button class="icon-btn" id="new-dm-btn" title="New DM" style="margin-left: auto; font-size: 14px;">
                            <i class="fas fa-plus"></i>
                        </button>
                    </div>
                    <div id="dm-list" class="channel-list">
                        <!-- Direct messages will be added here -->
                    </div>
                </div>
                
                <div id="text-channels" class="channel-section">
                    <div class="channel-section-header">
                        <i class="fas fa-hashtag"></i>
                        <span>TEXT CHANNELS</span>
                    </div>
                    <div id="text-channel-list" class="channel-list">
                        <!-- Text channels will be added here -->
                    </div>
                </div>
                
                <div id="voice-channels" class="channel-section">
                    <div class="channel-section-header">
                        <i class="fas fa-volume-up"></i>
                        <span>VOICE CHANNELS</span>
                    </div>
                    <div id="voice-channel-list" class="channel-list">
                        <!-- Voice channels will be added here -->
                    </div>
                </div>
            </div>

            <div class="user-info-bar">
                <div class="user-avatar-small">
                    <img id="user-avatar-img" src="" alt="User">
                    <div class="status-indicator online"></div>
                </div>
                <div class="user-info-text">
                    <div id="user-name-display" class="user-name">User</div>
                    <div id="user-discriminator" class="user-discriminator">#0000</div>
                </div>
                <div class="user-actions">
                    <button class="icon-btn" id="mic-btn" title="Mute/Unmute">
                        <i class="fas fa-microphone"></i>
                    </button>
                    <button class="icon-btn" id="headphone-btn" title="Deafen/Undeafen">
                        <i class="fas fa-headphones"></i>
                    </button>
                    <button class="icon-btn" id="settings-btn" title="Settings">
                        <i class="fas fa-cog"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Main Content Area -->
        <div class="main-content">
            <!-- Messages Header -->
            <div id="channel-header-bar" class="channel-header-bar">
                <div class="channel-info">
                    <i class="fas fa-hashtag"></i>
                    <span id="channel-name-display">general</span>
                </div>
                <div class="channel-actions">
                    <button class="icon-btn" id="members-btn" title="Show Members">
                        <i class="fas fa-users"></i>
                    </button>
                    <button class="icon-btn" id="search-btn" title="Search">
                        <i class="fas fa-search"></i>
                    </button>
                    <button class="icon-btn" id="pin-btn" title="Pinned Messages">
                        <i class="fas fa-thumbtack"></i>
                    </button>
                    <button class="icon-btn" id="channel-settings-btn" title="Channel Settings">
                        <i class="fas fa-cog"></i>
                    </button>
                </div>
            </div>

            <!-- Messages Container -->
            <div id="messages-container" class="messages-container">
                <div id="messages-list" class="messages-list">
                    <!-- Messages will be added here -->
                </div>
            </div>

            <!-- Message Input -->
            <div class="message-input-container">
                <div class="message-input-wrapper">
                    <button class="icon-btn" id="attach-btn" title="Attach File">
                        <i class="fas fa-plus"></i>
                    </button>
                    <input type="text" id="message-input" placeholder="Message #channel-name" />
                    <button class="icon-btn" id="emoji-btn" title="Add Emoji">
                        <i class="fas fa-smile"></i>
                    </button>
                    <button class="icon-btn" id="gift-btn" title="Send Gift">
                        <i class="fas fa-gift"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Right Sidebar (Members/Users) -->
        <div id="members-sidebar" class="members-sidebar">
            <div class="members-header">
                <span>Members ‚Äî <span id="member-count">0</span></span>
            </div>
            <div id="members-list" class="members-list">
                <!-- Members will be added here -->
            </div>
        </div>
    </div>

    <!-- Modals -->
    <!-- Create Server Modal -->
    <div id="create-server-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Create a Server</h2>
                <button class="modal-close" id="close-create-server">&times;</button>
            </div>
            <div class="modal-body">
                <p>Give your server a personality with a name and an icon.</p>
                <input type="text" id="server-name-input" placeholder="SERVER NAME" maxlength="100">
                <div class="server-icon-upload">
                    <label for="server-icon-input">
                        <i class="fas fa-image"></i>
                        <span>Upload Icon</span>
                    </label>
                    <input type="file" id="server-icon-input" accept="image/*" style="display: none;">
                </div>
                <button id="create-server-submit" class="btn-primary">Create Server</button>
            </div>
        </div>
    </div>

    <!-- Create Channel Modal -->
    <div id="create-channel-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Create Channel</h2>
                <button class="modal-close" id="close-create-channel">&times;</button>
            </div>
            <div class="modal-body">
                <label>Channel Type</label>
                <div class="channel-type-selector">
                    <button class="channel-type-btn active" data-type="text">
                        <i class="fas fa-hashtag"></i>
                        <span>Text</span>
                    </button>
                    <button class="channel-type-btn" data-type="voice">
                        <i class="fas fa-volume-up"></i>
                        <span>Voice</span>
                    </button>
                </div>
                <label>Channel Name</label>
                <input type="text" id="channel-name-input" placeholder="new-channel">
                <button id="create-channel-submit" class="btn-primary">Create Channel</button>
            </div>
        </div>
    </div>

    <!-- New DM Modal -->
    <div id="new-dm-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2>New Direct Message</h2>
                <button class="modal-close" id="close-new-dm">&times;</button>
            </div>
            <div class="modal-body">
                <input type="text" id="dm-search-input" placeholder="Search for users by username or email...">
                <div id="dm-search-results" class="user-search-results">
                    <!-- Search results will appear here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settings-modal" class="modal hidden">
        <div class="modal-content settings-modal">
            <div class="modal-header">
                <h2>User Settings</h2>
                <button class="modal-close" id="close-settings">&times;</button>
            </div>
            <div class="settings-body">
                <div class="settings-sidebar">
                    <button class="settings-tab active" data-tab="profile">My Account</button>
                    <button class="settings-tab" data-tab="privacy">Privacy & Safety</button>
                    <button class="settings-tab" data-tab="voice">Voice & Video</button>
                </div>
                <div class="settings-content">
                    <div id="profile-settings" class="settings-panel active">
                        <h3>Profile</h3>
                        <div class="avatar-upload">
                            <img id="profile-avatar-preview" src="" alt="Avatar">
                            <button id="change-avatar-btn">Change Avatar</button>
                            <input type="file" id="avatar-input" accept="image/*" style="display: none;">
                        </div>
                        <label>Username</label>
                        <input type="text" id="username-input" placeholder="Username">
                        <button id="save-profile-btn" class="btn-primary">Save Changes</button>
                    </div>
                    <div id="privacy-settings" class="settings-panel">
                        <h3>Privacy & Safety</h3>
                        <p>Privacy settings coming soon...</p>
                    </div>
                    <div id="voice-settings" class="settings-panel">
                        <h3>Voice & Video</h3>
                        <label>Input Device</label>
                        <select id="input-device-select"></select>
                        <label>Output Device</label>
                        <select id="output-device-select"></select>
                        <button id="test-voice-btn" class="btn-primary">Test Voice</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script type="module" src="app.js"></script>
</body>
</html>

